<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Friend Finder | Survey</title>

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />

    <link rel="stylesheet" href="app.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center">Friend Finder</h1>

      <h3><strong>About You</strong></h3>
      <h4>Name</h4>
      <input type="text" id="user-name" class="form-control" required />

      <br />

      <form>
        <!-- 
      ======================= Question 1 =======================
     -->

        <div class="form-group">
          <h3>Question: 1</h3>
          <label for="q1"><h4>I make friends easily.</h4></label>
          <select name="form-control" id="q1">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 2 =======================
     -->

        <div class="form-group">
          <h3>Question: 2</h3>
          <label for="q2"><h4>I have a vivid imagination.</h4></label>
          <select name="form-control" id="q2">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 3 =======================
     -->

        <div class="form-group">
          <h3>Question: 3</h3>
          <label for="q3"><h4>I worry about things.</h4></label>
          <select name="form-control" id="q3">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 4 =======================
     -->

        <div class="form-group">
          <h3>Question: 4</h3>
          <label for="q4"><h4>I love large parties.</h4></label>
          <select name="form-control" id="q4">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 5 =======================
     -->

        <div class="form-group">
          <h3>Question: 5</h3>
          <label for="q5"><h4>I believe in the importance of art.</h4></label>
          <select name="form-control" id="q5">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 6 =======================
     -->

        <div class="form-group">
          <h3>Question: 6</h3>
          <label for="q6"><h4>I get angry easily.</h4></label>
          <select name="form-control" id="q6">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 7 =======================
     -->

        <div class="form-group">
          <h3>Question: 7</h3>
          <label for="q7"><h4>I take charge.</h4></label>
          <select name="form-control" id="q7">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 8 =======================
     -->

        <div class="form-group">
          <h3>Question: 8</h3>
          <label for="q8"><h4>I experience my emotions intensely.</h4></label>
          <select name="form-control" id="q8">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 9 =======================
     -->

        <div class="form-group">
          <h3>Question: 9</h3>
          <label for="q9"><h4>I am always busy.</h4></label>
          <select name="form-control" id="q9">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>

        <hr />

        <!-- 
      ======================= Question 10 =======================
     -->

        <div class="form-group">
          <h3>Question: 10</h3>
          <label for="q10"><h4>I am easily intimidated.</h4></label>
          <select name="form-control" id="q10">
            <option value="1">Strongly Disagree</option>
            <option value="2">Disagree</option>
            <option value="3">Nutral</option>
            <option value="4">Agree</option>
            <option value="5">Strongly Agree</option>
          </select>
        </div>
      </form>

      <div class="newButton text-center">
        <button id="submit-btn" class="btn btn-info">
          Submit
        </button>
      </div>

      <br />

      <div class="text-center">
        <a href="api/friends" target="_blank">API Friends List</a> |
        <a href="https://github.com/ConnorScoma1/Friend-Finder" target="_blank">Github Repo</a>
      </div>
    </div>
    <br>
    <br>

    </div>

    <script>
        // click functionality to close modal.
        $(".close, #match-name").on("click", function(){
            $(".bg-modal").css("display", "none");
            $('html, body').css({
                overflow: 'auto',
                height: 'auto'
            }); 
        });
        // click functionality for submit button.
        $("#submit-btn").on("click", function(){
            event.preventDefault();
            // display modal.
            $(".bg-modal").css("display", "flex");
            // lock scrolling
            $('html, body').css({
                overflow: 'hidden',
                height: '100%'
            }); 
            // Instantiate the object userData and assign the survey data as key pairs.
            var userData = {
                name: $("#user-name").val(),
                scores: [
                    $("#q1").val(),
                    $("#q2").val(),
                    $("#q3").val(),
                    $("#q4").val(),
                    $("#q5").val(),
                    $("#q6").val(),
                    $("#q7").val(),
                    $("#q8").val(),
                    $("#q9").val(),
                    $("#q10").val()
                ]
            };
            // displays (within the client's console) the instantiated object comprised of user's survey answers.
            console.log(userData);
            $.post("/api/friends", userData, function(data) {
                console.log(data);
                // Take result from POST and display the best match's name and photo (in modal)
                $("#match-name").text(data.name);
            });
        });
    </script>
  </body>
</html>
